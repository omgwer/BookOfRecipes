<div name="createRicipe" novalidate class="create-recipe">
  <div class="create-recipe__top-block">
    <span class="create-recipe__rollback font__text_normal" routerLink=""
      >Назад</span
    >
    <div class="create-recipe__block">
      <h2 class="create-recipe__title font__title_large">
        Добавить новый рецепт
      </h2>
      <button
        mat-raised-button
        class="yellow-button font__text_large"
        routerLink="/create-recipe"
      >
        Опубликовать
      </button>
    </div>
  </div>
  <div class="create-recipe__recipe-container">
    <div>
      <input
        type="file"
        (change)="getFile($event)"
        accept=".jpg, .png, .svg, .jpeg"
        class="create-recipe__upload-photo-button"
        id="photoUploadButton"
      />
      <label
        class="create-recipe__upload-photo"
        for="photoUploadButton"
      ></label>
    </div>
    <div class="create-recipe__input-container">
      <div class="create-recipe__recipe-name">
        <mat-form-field
          appearance="fill"
          class="simple-input font__text_normal"
        >
          <mat-label>Название рецепта</mat-label>
          <input
            [(ngModel)]="recipe.name"
            autocomplete="off"
            class="simple-input__input-field"
            matInput
            [formControl]="input"
            required
            name="first"
            ngDefaultControl
          />
          <mat-error *ngIf="email.invalid">{{ getErrorMessage() }}</mat-error>
        </mat-form-field>
      </div>
      <div class="create-recipe__recipe-description">
        <mat-form-field appearance="fill" class="long-input font__text_normal">
          <mat-label>Краткое описание рецепта(150 символов)</mat-label>
          <textarea
            [(ngModel)]="recipe.description"
            matInput
            class="long-input__input-field"
            [formControl]="input"
            required
            name="first"
            ngDefaultControl
          ></textarea>
          <mat-error *ngIf="email.invalid">{{ getErrorMessage() }}</mat-error>
        </mat-form-field>
      </div>
      <div class="create-recipe__add-tags">
        <mat-form-field
          appearance="fill"
          class="simple-input font__text_normal"
        >
          <mat-label>Добавить теги</mat-label>
          <input
            [(ngModel)]="recipe.tagsList"
            autocomplete="off"
            class="simple-input__input-field"
            matInput
            [formControl]="input"
            required
            name="first"
            ngDefaultControl
          />
          <mat-error *ngIf="email.invalid">{{ getErrorMessage() }}</mat-error>
        </mat-form-field>
      </div>
      <div class="create-recipe__droplist-container">
        <div class="create-recipe__droplist-elements">
          <div class="create-recipe__droplist-element">
            <mat-form-field
              class="create-recipe__cooking-time"
              appearance="fill"
            >
              <mat-label>Время готовки</mat-label>
              <mat-select
                [formControl]="input"
                [(ngModel)]="recipe.timeForCook"
                required
                name="test"
              >
                <mat-option value="5">5</mat-option>
                <mat-option value="15">15</mat-option>
                <mat-option value="30">30</mat-option>
                <mat-option value="45">45</mat-option>
                <mat-option value="60">60</mat-option>
              </mat-select>

              <mat-error *ngIf="input.invalid">{{
                getErrorMessage()
              }}</mat-error>
            </mat-form-field>
          </div>
          <span class="font__text_tiny"> Минут</span>
        </div>
        <div class="create-recipe__droplist-elements">
          <div class="create-recipe__droplist-element">
            <mat-form-field class="create-recipe__serving" appearance="fill">
              <mat-label>Порций в блюде</mat-label>

              <mat-select
                [(ngModel)]="recipe.numberOfServings"
                [formControl]="input"
                required
                ngDefaultControl
              >
                <mat-option value="1">1</mat-option>
                <mat-option value="2">2</mat-option>
                <mat-option value="3">3</mat-option>
                <mat-option value="4">4</mat-option>
                <mat-option value="5">5</mat-option>
                <mat-option value="6">6</mat-option>
                <mat-option value="7">7</mat-option>
                <mat-option value="8">8</mat-option>
                <mat-option value="9">9</mat-option>
                <mat-option value="10">10</mat-option>
              </mat-select>
              <mat-error *ngIf="input.invalid">{{
                getErrorMessage()
              }}</mat-error>
            </mat-form-field>
          </div>
          <span class="font__text_tiny"> Персон</span>
        </div>
      </div>
    </div>
  </div>
  <div class="create-recipe__container">
    <div>
      <p class="create-recipe__ingredients-header font__text_extra-large">
        Ингридиенты
      </p>
      <div
        *ngFor="let ingredient of recipe.ingredients"
        class="create-recipe__ingredients-container"
      >
        <img
          src="../../../assets/create-recipe/close.svg"
          class="create-recipe__close-button"
          (click)="deleteHeaderIngredient(ingredient)"
        />
        <div class="create-recipe__ingredients">
          <div class="create-recipe__ingredients">
            <div class="create-recipe__ingredient-title">
              <mat-form-field
                appearance="fill"
                class="simple-input font__text_normal"
              >
                <mat-label>Заголовок для ингридиентов</mat-label>
                <input
                  ngDefaultControl
                  [(ngModel)]="ingredient.title"
                  autocomplete="off"
                  class="simple-input__input-field"
                  matInput
                  [formControl]="input"
                  required
                  name="first"
                />
                <mat-error *ngIf="email.invalid">{{
                  getErrorMessage()
                }}</mat-error>
              </mat-form-field>
            </div>
          </div>
          <div>
            <div class="create-recipe__ingredient-description">
              <mat-form-field
                appearance="fill"
                class="long-input font__text_normal"
              >
                <mat-label> Список подуктов для категории </mat-label>
                <textarea
                  [(ngModel)]="ingredient.description"
                  ngDefaultControl
                  matInput
                  class="long-input__input-field"
                  [formControl]="input"
                  required
                  name="first"
                ></textarea>
                <mat-error *ngIf="email.invalid">{{
                  getErrorMessage()
                }}</mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="create-recipe__add-ingredient">
        <button
          (click)="addHeaderIngredient()"
          mat-stroked-button
          class="white-button font__text_large"
        >
          +&nbsp;&nbsp;&nbsp; Добавить заголовок
        </button>
      </div>
    </div>
    <div class="create-recipe__steps-container">
      <div class="create-recipe__step" *ngFor="let step of recipe.steps">
        <img
          src="../../../assets/create-recipe/close.svg"
          class="create-recipe__close-step-button"
          (click)="deleteStep(step)"
        />
        <p class="font__text_large create-recipe__step-title">
          Шаг {{ step.order }}
        </p>
        <div class="create-recipe__step-description">
          <mat-form-field
            appearance="fill"
            class="long-input font__text_normal"
          >
            <mat-label>Список подуктов для категории</mat-label>
            <textarea
              ngDefaultControl
              [(ngModel)]="step.description"
              matInput
              class="long-input__input-field"
              [formControl]="input"
              required
              name="first"
            ></textarea>
            <mat-error *ngIf="email.invalid">{{ getErrorMessage() }}</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="create-recipe__add-step">
        <button
          (click)="addStep()"
          mat-stroked-button
          class="white-button font__text_large"
        >
          + &nbsp;&nbsp;&nbsp;Добавить шаг
        </button>
      </div>
    </div>
  </div>
</div>
